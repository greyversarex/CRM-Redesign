# CRM-система учета клиентов, услуг и финансов

## 1. Общая концепция

Система представляет собой CRM для учета клиентов, оказанных услуг, записей и финансов с календарной логикой и разделением ролей пользователей.

Ключевая сущность системы — **Запись**, которая фиксирует факт оказания услуги конкретному клиенту конкретным сотрудником и напрямую влияет на финансы и аналитику.

---

## 2. Роли и доступы

### 2.1 Администратор

Администратору доступны:

* главная страница с календарем
* записи
* клиенты
* услуги
* доходы и расходы
* аналитика дня
* аналитика месяца
* сотрудники

### 2.2 Сотрудник

Сотруднику доступны:

* авторизация
* одна рабочая страница
* вкладка «Записи»

Ограничения сотрудника:

* нет доступа к финансам
* нет доступа к аналитике
* нет доступа к клиентам и услугам как отдельным разделам

---

## 3. Авторизация

Все пользователи обязаны проходить авторизацию по логину и паролю.

---

## 4. Главная страница администратора

### 4.1 Главное меню

Меню навигации:

* Клиенты
* Услуги
* Аналитика
* Сотрудники

---

### 4.2 Панель записей

Располагается перед календарем и содержит:

* сегодняшние записи
* завтрашние записи

---

### 4.3 Календарь

* отображение месяцев в виде карточек
* в карточке:

  * название месяца (по центру сверху)
  * сетка дней месяца
* каждый день кликабелен и ведет на страницу дня

---

## 5. Страница дня (администратор)

### Вкладки:

1. Записи
2. Доходы
3. Расходы
4. Аналитика дня

---

## 6. Записи

### 6.1 Назначение

Записи используются для фиксации оказанных услуг клиентам.

---

### 6.2 Добавление записи

Модальное окно содержит:

* выбор клиента
* выбор услуги
* выбор даты (включая будущие даты)
* чекбокс «Напомнить»

---

### 6.3 Работа с записями

Для каждой записи доступно:

* отметить галочкой — услуга выполнена
* отметить иксом — услуга не выполнена
* перенос на другой день
* удаление записи

---

### 6.4 Связь с финансами

Если запись отмечена галочкой:

* автоматически создается доход
* доход относится к той же дате
* наименование дохода = название услуги
* сумма дохода = цена услуги

---

### 6.5 Связь с сотрудниками

* каждая запись создается конкретным сотрудником
* администратор видит, какой сотрудник создал запись

---

## 7. Клиенты

### 7.1 Данные клиента

* ФИО
* номер телефона

---

### 7.2 Страница клиента

Отображается:

* история всех записей данного клиента

---

## 8. Услуги

### 8.1 Данные услуги

* название услуги
* цена

Цена всегда указывается в сомони.

---

## 9. Доходы и расходы

### 9.1 Доходы

Источники:

* автоматически из выполненных записей
* ручное добавление

Поля при ручном добавлении:

* наименование
* сумма
* чекбокс «Напомнить»

---

### 9.2 Расходы

Поля:

* наименование
* сумма
* чекбокс «Напомнить»

---

## 10. Аналитика дня

Отображается на странице дня:

* таблица доходов
* таблица расходов
* процентное соотношение доходов от общего
* итоги дня (доход, расход, результат)

---

## 11. Аналитика месяца (администратор)

### 11.1 Выбор месяца

Администратор выбирает месяц для анализа.

---

### 11.2 Финансы месяца

* общий доход
* общий расход
* итог месяца

---

### 11.3 Клиенты

* количество уникальных клиентов, обслуженных за месяц

---

### 11.4 Сотрудники

Таблица по сотрудникам:

* ФИО
* количество выполненных услуг
* сумма дохода, принесенного сотрудником

---

## 12. Сотрудники

### 12.1 Управление сотрудниками

Администратор может создавать сотрудников.

Поля:

* ФИО
* логин
* пароль

---

# 13. Структура данных (логическая)

## Пользователи

* id
* role (admin / employee)
* full_name
* login
* password_hash

---

## Клиенты

* id
* full_name
* phone

---

## Услуги

* id
* name
* price (сомони)

---

## Записи

* id
* client_id
* service_id
* employee_id
* date
* status (pending / done / canceled)
* reminder (true / false)

---

## Доходы

* id
* date
* name
* amount
* record_id (nullable)
* reminder (true / false)

---

## Расходы

* id
* date
* name
* amount
* reminder (true / false)

---

## Связи

* запись → клиент
* запись → услуга
* запись → сотрудник
* доход → запись (если создан автоматически)

---

## Текущее состояние

Документ описывает MVP-версию системы с полностью определенной логикой экранов, ролей, аналитики и структуры данных.

Готов к дальнейшему расширению без архитектурных конфликтов.
